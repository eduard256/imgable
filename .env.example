# =============================================================================
# IMGABLE - Environment Configuration
# Copy this file to .env and adjust values for your setup
# =============================================================================

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL password - CHANGE THIS IN PRODUCTION!
POSTGRES_PASSWORD=change-me-in-production

# -----------------------------------------------------------------------------
# Storage Paths
# Absolute paths on the host machine
# -----------------------------------------------------------------------------
# Directory where users upload photos (input)
UPLOADS_PATH=/data/uploads

# Directory for processed media files (output)
MEDIA_PATH=/data/media

# Directory for files that failed processing
FAILED_PATH=/data/failed

# -----------------------------------------------------------------------------
# Scanner Configuration
# -----------------------------------------------------------------------------
# Polling interval in seconds (fsnotify is primary, polling is fallback)
SCAN_INTERVAL_SEC=60

# -----------------------------------------------------------------------------
# Processor Configuration
# -----------------------------------------------------------------------------
# Number of concurrent worker goroutines
WORKERS=4

# Maximum retry attempts for failed files before moving to /failed
MAX_RETRIES=3

# Memory limit in MB for processor container
MAX_MEMORY_MB=1024

# -----------------------------------------------------------------------------
# Image Processing
# -----------------------------------------------------------------------------
# WebP quality (1-100, higher = better quality, larger files)
PREVIEW_QUALITY=85

# Preview sizes in pixels (longest edge)
# Files smaller than target will not be upscaled
PREVIEW_SMALL_PX=800
PREVIEW_MEDIUM_PX=1600
PREVIEW_LARGE_PX=2500

# -----------------------------------------------------------------------------
# Geocoding (Nominatim)
# -----------------------------------------------------------------------------
# Enable reverse geocoding for GPS coordinates
NOMINATIM_ENABLED=true

# Nominatim API URL (use your own instance for heavy usage)
NOMINATIM_URL=https://nominatim.openstreetmap.org

# Rate limit in milliseconds between requests (respect Nominatim ToS)
NOMINATIM_RATE_LIMIT_MS=1100

# Radius in meters for clustering photos into places
PLACE_RADIUS_M=500

# -----------------------------------------------------------------------------
# API Server
# -----------------------------------------------------------------------------
# Port for the API server
API_PORT=9812

# Password for web interface login - CHANGE THIS!
IMGABLE_PASSWORD=change-me-in-production

# JWT token expiry in days
JWT_EXPIRY_DAYS=30

# Rate limit for login attempts per minute per IP
RATE_LIMIT_LOGIN=5

# Path to static files (React build)
# Leave empty if frontend is not built yet
STATIC_PATH=./api/static

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: text (human-readable) or json (structured)
LOG_FORMAT=text
