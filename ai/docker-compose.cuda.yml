# =============================================================================
# Imgable AI Service - CUDA Override
# =============================================================================
#
# Usage:
#   docker-compose -f docker-compose.yml -f docker-compose.cuda.yml up -d
#
# =============================================================================

services:
  ai:
    build:
      context: .
      dockerfile: Dockerfile.cuda
    image: imgable/ai:cuda

    environment:
      # GPU device
      - AI_DEVICE=cuda
      - AI_GPU_ID=${AI_GPU_ID:-0}
      - AI_GPU_MEMORY_LIMIT=${AI_GPU_MEMORY_LIMIT:-0}

    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
